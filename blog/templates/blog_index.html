{% extends "base.html" %}

{% load markdown_extras %}

{% block page_content %}

<h1>My Blog</h1>
<div class="row">
  {% for post in posts %}
    <div class="col-md-4">
        <div class="card mb-2">
            <img class="card-img-top" src="{{ post.main_image.url }}">
            <div class="card-body">
              <h2 class="card-title"><a href="{% url 'blog_detail' post.slug %}">{{ post.title }}</a></h2>
              <small class="text-muted">
                Published on:&nbsp;
                {{ post.created_on.date }} |&nbsp;
                <i class="far fa-clock text-info"></i> {% if post.read_time <= 1 %} < 1 Minute {% else %}{{ instance.read_time }} minutes read {% endif %} |&nbsp;
                <i class="far fa-eye"></i> {{ post.number_of_views}} views
                <i class="far fa-comment"></i> 12 comments
                Categories:&nbsp;
                {% for category in post.categories.all %}
                <a href="{% url 'blog_category' category.name %}">
                  {{ category.name }}
                  </a>&nbsp;
                {% endfor %}
              </small>
                <p class="card-text">{{ post.body | markdown | safe | truncatewords:30 }}</p>
                <a href="{% url 'blog_detail' post.slug %}" class="btn btn-primary">Read More &rarr;</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

